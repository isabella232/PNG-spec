<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="710" height="340"><style type="text/css">line,rect{stroke:#000}rect{fill:#fff}text{font-family:Verdana,sans-serif;font-size:14;text-anchor:start}line{stroke-width:2}</style><defs><symbol id="filter1"><rect style="fill:#eca" width="8" height="8"/></symbol><symbol id="pixelfr"><rect style="fill:#eaa" width="8" height="8"/></symbol><symbol id="pixelfg"><rect style="fill:#aea" width="8" height="8"/></symbol><symbol id="pixelfb"><rect style="fill:#aae" width="8" height="8"/></symbol><symbol id="pixelfa"><rect style="fill:#ddd" width="8" height="8"/></symbol><symbol id="pixelr"><rect style="fill:red" width="8" height="8"/></symbol><symbol id="pixelg"><rect style="fill:green" width="8" height="8"/></symbol><symbol id="pixelb"><rect style="fill:#00f" width="8" height="8"/></symbol><symbol id="pixela"><rect style="fill:gray" width="8" height="8"/></symbol></defs><marker id="arrend" markerHeight="8" markerWidth="8" orient="auto" refX="8" refY="4"><path d="M 1 4 L 1 1 8 4 1 7z"/></marker><marker id="larrend" markerHeight="8" markerWidth="8" orient="auto" refX="0" refY="4"><path d="M 8 4 L 8 1 0 4 8 7z"/></marker><g><g transform="translate(10,10) scale(4)"><use transform="translate(18,6)" xlink:href="#pixela"/><use transform="translate(12,12)" xlink:href="#pixelb"/><use transform="translate(6,18)" xlink:href="#pixelg"/><use transform="translate(0,24)" xlink:href="#pixelr"/></g><text x="8" y="116" transform="translate(10,10)">1</text></g><g><g transform="translate(60,10) scale(4)"><use transform="translate(18,6)" xlink:href="#pixela"/><use transform="translate(12,12)" xlink:href="#pixelb"/><use transform="translate(6,18)" xlink:href="#pixelg"/><use transform="translate(0,24)" xlink:href="#pixelr"/></g><text x="8" y="116" transform="translate(60,10)">2</text></g><g><g transform="translate(120,10) scale(4)"><use transform="translate(18,6)" xlink:href="#pixela"/><use transform="translate(12,12)" xlink:href="#pixelb"/><use transform="translate(6,18)" xlink:href="#pixelg"/><use transform="translate(0,24)" xlink:href="#pixelr"/></g><text x="8" y="116" transform="translate(120,10)">3</text></g><g><g transform="translate(180,10) scale(4)"><use transform="translate(18,6)" xlink:href="#pixela"/><use transform="translate(12,12)" xlink:href="#pixelb"/><use transform="translate(6,18)" xlink:href="#pixelg"/><use transform="translate(0,24)" xlink:href="#pixelr"/></g><text x="8" y="116" transform="translate(180,10)">4</text></g><g><g transform="translate(240,10) scale(4)"><use transform="translate(18,6)" xlink:href="#pixela"/><use transform="translate(12,12)" xlink:href="#pixelb"/><use transform="translate(6,18)" xlink:href="#pixelg"/><use transform="translate(0,24)" xlink:href="#pixelr"/></g><text x="8" y="116" transform="translate(240,10)">5</text></g><text x="360" y="80">A scanline is serialized, then transformed</text><text x="360" y="100">by filter type t. Each entry in the filtered</text><text x="360" y="120">scanline depends on the filter type and</text><text x="360" y="140">the bytes from same channel on the</text><text x="360" y="160">current or previous scanline.</text><line x1="50" x2="50" y1="160" y2="240" marker-end="url(#arrend)"/><g><text x="0" y="45" transform="translate(20,250)">Filter</text><text x="0" y="57" transform="translate(20,250)">type t</text><text x="200" y="45" transform="translate(20,250)">Filtered scanline</text><g transform="translate(20,250) scale(3)"><use transform="translate(0,0)" xlink:href="#filter1"/></g><text x="6" y="18" transform="translate(20,250)">t</text></g><g><g transform="translate(27,220) scale(3)"><use transform="translate(10,10)" xlink:href="#pixelfr"/><use transform="translate(20,10)" xlink:href="#pixelfg"/><use transform="translate(30,10)" xlink:href="#pixelfb"/><use transform="translate(40,10)" xlink:href="#pixelfa"/></g><text x="84" y="15" transform="translate(27,220)">1</text></g><g><g transform="translate(150,220) scale(3)"><use transform="translate(10,10)" xlink:href="#pixelfr"/><use transform="translate(20,10)" xlink:href="#pixelfg"/><use transform="translate(30,10)" xlink:href="#pixelfb"/><use transform="translate(40,10)" xlink:href="#pixelfa"/></g><text x="84" y="15" transform="translate(150,220)">2</text></g><g><g transform="translate(273,220) scale(3)"><use transform="translate(10,10)" xlink:href="#pixelfr"/><use transform="translate(20,10)" xlink:href="#pixelfg"/><use transform="translate(30,10)" xlink:href="#pixelfb"/><use transform="translate(40,10)" xlink:href="#pixelfa"/></g><text x="84" y="15" transform="translate(273,220)">3</text></g><g><g transform="translate(396,220) scale(3)"><use transform="translate(10,10)" xlink:href="#pixelfr"/><use transform="translate(20,10)" xlink:href="#pixelfg"/><use transform="translate(30,10)" xlink:href="#pixelfb"/><use transform="translate(40,10)" xlink:href="#pixelfa"/></g><text x="84" y="15" transform="translate(396,220)">4</text></g><g><g transform="translate(519,220) scale(3)"><use transform="translate(10,10)" xlink:href="#pixelfr"/><use transform="translate(20,10)" xlink:href="#pixelfg"/><use transform="translate(30,10)" xlink:href="#pixelfb"/><use transform="translate(40,10)" xlink:href="#pixelfa"/></g><text x="84" y="15" transform="translate(519,220)">5</text></g></svg>